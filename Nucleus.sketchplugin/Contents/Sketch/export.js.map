{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/common.js","webpack://exports/./src/export.js"],"names":["isPage","layer","class","MSPage","isArtboard","MSArtboardGroup","isSymbolMaster","MSSymbolMaster","isSymbolInstance","MSSymbolInstance","isSymbol","isGroup","MSLayerGroup","isLayer","isText","MSTextLayer","alert","title","message","app","NSApplication","sharedApplication","displayDialog_withTitle_","getFirstTag","str","match","getAllTags","getAllTagsWithoutName","getPropName","split","getPropVal","tagAndNames","fullLayerName","name","splitName","layerName","inTag","fullName","tags","rgbaCode","color","red","Math","round","green","blue","alpha","getShadow","style","shadows","enabledShadows","len","length","getInnerShadow","enabledInnerShadows","exportAction","context","ways","doc","document","selection","allPages","pages","allLayers","selectedLayer","firstObject","sharedStyles","documentData","layerStyles","i","page","objectAtIndex","artboards","getAllLayers","exportJSON","a","file_path","filename","jsonName","String","jsonObj","format","obj","jsonAsStr","JSON","stringify","substring","replace","formattedString","file","NSString","stringWithString","writeToFile_atomically_encoding_error_","NSUTF8StringEncoding","alertMessage","objects","forEach","objectID","layers","push","count","showMessage","fileTypes","NSArray","arrayWithObjects","panel","NSOpenPanel","openPanel","setCanChooseDirectories","setCanCreateDirectories","setAllowedFileTypes","clicked","runModal","NSFileHandlingPanelOKButton","isDirectory","firstURL","URLs","stringWithFormat_","stringWithString_","indexOf","fontWeights","thin","extralight","ultralight","light","book","normal","regular","roman","medium","semibold","demibold","bold","boldmt","psboldmt","extrabold","ultrabold","black","heavy","nucleonPropNames","getnucleonPropVal","nucleonPropName","nucleonPropValues","textColor","frame","height","width","firstEnabledFill","getRadius","getShadows","weightsNames","Object","keys","fontWeight","attr","toLowerCase","getVariable","tag","attrs","slice","nucleonVars","parentGroupName","parentGroup","wayPath","y","tagName","key","charAt","nucleonProp","nucleonVar","res","attrName","innerShadows","cssShadows","cssInnerShadows","s","offsetX","offsetY","blurRadius","spread","points","children","e","radiusTopLeft","cornerRadius","radiusTopRight","radiusBottomRight","radiusBottomLeft","layerAttrsBuilder","tagsNames","nucleonAttrsObj","attrsObj","rawAttrs","CSSAttributes","boxShadow","radius","splice","attrFontWeight","lineHeight","index","buildData","collection","result","builderData","symbolMaster","symbolLayer","fullSymbolLayerName","symbolSplitName","symbolLayerName","deepCollection","assign","collectionName"],"mappings":"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","file":"export.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/export.js\");\n","function isPage(layer) {\n\treturn layer.class() == MSPage;\n}\n\nfunction isArtboard(layer) {\n\treturn layer.class() == MSArtboardGroup;\n}\n\nfunction isSymbolMaster(layer) {\n\treturn layer.class() == MSSymbolMaster;\n}\n\nfunction isSymbolInstance(layer) {\n\treturn layer.class() == MSSymbolInstance;\n}\n\nfunction isSymbol(layer) {\n\treturn layer.class() == MSSymbolInstance || layer.class() == MSSymbolMaster;\n}\n\nfunction isGroup(layer) {\n\treturn layer.class() == MSLayerGroup;\n}\n\nfunction isLayer(layer) {\n\treturn !isGroup(layer) && !isText(layer);\n}\n\n// MSTextLayer\nfunction isText(layer) {\n\treturn layer.class() == MSTextLayer;\n}\n\nfunction alert(title, message){\n\tvar app = NSApplication. sharedApplication();\n\tapp.displayDialog_withTitle_(message, title);\n}\n\nfunction getFirstTag(str){\n\treturn str.match(/[^#\\ ^\\.]+/g);\n}\n\nfunction getAllTags(str){\n\treturn str.match(/[^#\\ ^\\.]+/g);\n}\n\nfunction getAllTagsWithoutName(str){\n\t return str.match(/#([^#\\ ^\\.]+)/);\n}\n\nfunction getPropName(str){\n\tvar split = str.match(/(.+)\\:\\s*(.+)/);\n\treturn split[1];\n}\n\nfunction getPropVal(str){\n\tvar split = str.match(/(.+)\\:\\s*(.+)/);\n\treturn split[2];\n}\n\nfunction tagAndNames(layer){\n\t\t\tvar fullLayerName = layer.name(),\n\t\t\tsplitName = getAllTags(fullLayerName),\n\t\t\tlayerName = splitName == null ? fullLayerName : splitName[0];\n\t\t \tinTag = getAllTagsWithoutName(fullLayerName) ?  true : false;\n\n\t\t\treturn {fullName: fullLayerName, tags: inTag, name: layerName}\n\t}\n\n\nfunction rgbaCode(color) {\n  var red = Math.round(color.red() * 255);\n  var green = Math.round(color.green() * 255);\n  var blue = Math.round(color.blue() * 255);\n\n  return 'rgba(' + red + ',' + green + ',' + blue + ',' + color.alpha() + ')';\n}\n\nfunction getShadow(style) {\n\tvar shadows = style.enabledShadows();\n\tvar len = shadows.length;\n\n\tif (len == 0) {\n\t\treturn null;\n\t} else {\n\t\treturn shadows[len - 1];\n\t}\n}\n\nfunction getInnerShadow(style) {\n\tvar shadows = style.enabledInnerShadows();\n\tvar len = shadows.length;\n\n\tif (len == 0) {\n\t\treturn null;\n\t} else {\n\t\treturn shadows[len - 1];\n\t}\n}\n","import * as common from './common.js';\n\n\nexport function exportAction (context) {\n  var ways = [];\n  var doc = context.document;\n  var selection = context.selection;\n  var allPages = doc.pages();\n  var allLayers = [];\n  var selectedLayer = selection.firstObject();\n  var sharedStyles = context.document.documentData().layerStyles().sharedStyles();\n\n  for (var i = 0; i < doc.pages().length; i++) {\n    var page = doc.pages().objectAtIndex(i);\n    var artboards = page.artboards();\n    getAllLayers(artboards);\n  }\n\n  function exportJSON(a, file_path, filename){\n    var jsonName = '$' + String(filename);\n  \t// Create the JSON object from the layer array\n    var jsonObj = {};\n    jsonObj[jsonName] = a;\n\n    function format(obj){\n      var jsonAsStr = JSON.stringify(obj, null, 2);\n      jsonAsStr = jsonAsStr.substring(1, jsonAsStr.length - 1);\n      jsonAsStr = jsonAsStr.replace(/\"/g, '')\n                          .replace(/[\\[\\{]/g, '(')\n                          .replace(/[\\]\\}]/g, ')')\n                          .replace(/\\\\/g, '\\'');\n\n      return jsonAsStr;\n    }\n\n    var formattedString = format(ways).replace(/,/g, '') + format(jsonObj);\n                      //   log(jsonObj);\n    // jsonAsStr.replace(/\\\"/g, '');\n    // Convert the object to a json string\n    var file = NSString.stringWithString(formattedString + ';');\n    // var scss = file.replace(/\\{/g, '(').replace(/\\}/g, ')');\n    // Save the file\n    file.writeToFile_atomically_encoding_error_( file_path + filename + \".scss\"  ,true  ,NSUTF8StringEncoding  ,null);\n\n    var alertMessage = jsonName+\".json saved to: \" + file_path;\n    alert(\"SCSS MAP Exported!\", alertMessage);\n  }\n\n  function getAllLayers(objects){\n    objects.forEach(function(obj){\n      var objectID = obj.objectID();\n\n      if (isArtboard(obj)) {\n        var layers = obj.layers();\n\n        getAllLayers(layers);\n        //need alert Please create the artboard\n      }\n      else if (isSymbolMaster(obj)) {\n        var layers = obj.layers();\n\n        allLayers.push(obj);\n        getAllLayers(layers);\n      }\n      else if (isGroup(obj)) {\n        var layers = obj.layers();\n\n        allLayers.push(obj);\n        getAllLayers(layers);\n      }\n      else {\n        allLayers.push(obj);\n      }\n    })\n  }\n\n  //make sure something is selected\n  if(selection.count() == 0){\n    \tdoc.showMessage(\"Please select a layer.\");\n  }\n  else {\n\n    //allow xml to be written to the folder\n    var fileTypes = NSArray.arrayWithObjects(\"json\", null);\n\n    //create select folder window\n    var panel = NSOpenPanel.openPanel();\n    panel.setCanChooseDirectories(true);\n    panel.setCanCreateDirectories(true);\n    panel.setAllowedFileTypes(fileTypes);\n\n    var clicked = panel.runModal();\n    //check if Ok has been clicked\n  \tif (clicked == NSFileHandlingPanelOKButton) {\n\n  \t\tvar isDirectory = true;\n      //get the folder path\n  \t\tvar firstURL = panel.URLs().objectAtIndex(0);\n      //format it to a string\n  \t\tvar file_path = NSString.stringWithFormat_( NSString.stringWithString_( \"%@\"), firstURL);\n\n      //remove the file:// path from string\n      if (0 === file_path.indexOf(\"file://\")) {\n        file_path = file_path.substring(7);\n      }\n  \t}\n  }\n\n  //google fonts weigts\n  var fontWeights = {\n     thin: 100,\n     extralight: 200,\n     ultralight: 200,\n     light: 300,\n     book: 400,\n     normal: 400,\n     regular: 400,\n     roman: 400,\n     medium: 500,\n     semibold: 600,\n     demibold: 600,\n     bold: 700,\n     boldmt: 700,\n     psboldmt: 700,\n     extrabold: 800,\n     ultrabold: 800,\n     black: 900,\n     heavy: 900\n   };\n\n   var nucleonPropNames = {\n     'h': 'height',\n     'w': 'width',\n     'o': 'width',\n     'b': 'background',\n     'c': 'color',\n     'r': 'border-radius',\n     's': 'box-shadow',\n   };\n\n   function getnucleonPropVal(layer, nucleonPropName) {\n      var nucleonPropValues = {};\n\n      if (isText(layer)) {\n        nucleonPropValues = { 'color': rgbaCode(layer.textColor()) }\n      } else {\n        nucleonPropValues = {\n           'height': layer.frame().height() + 'px',\n           'width': layer.frame().width() + 'px',\n           'background': rgbaCode(layer.style().firstEnabledFill().color()),\n           'border-radius': getRadius(layer),\n           'box-shadow': getShadows(layer),\n        }\n      }\n\n      return nucleonPropValues[nucleonPropName];\n   }\n\n  var  weightsNames = Object.keys(fontWeights);\n\n  function getFirstTag(str){\n    return str.match(/[^#\\ ^\\.]+/g);\n  }\n\n  function getAllTags(str){\n    return str.match(/[^#\\ ^\\.]+/g);\n  }\n\n  function getAllTagsWithoutName(str){\n     return str.match(/#([^#\\ ^\\.]+)/);\n  }\n\n  function getPropName(str){\n    var split = str.match(/(.+)\\:\\s*(.+)/);\n    return split[1];\n  }\n\n  function getPropVal(str){\n    var split = str.match(/(.+)\\:\\s*(.+)/);\n    return split[2];\n  }\n\n  function fontWeight(attr){\n    var splitName = attr.match(/(.+)\\-\\s*(.+)/);\n    var name = splitName[2].toLowerCase();\n\n    if (splitName != null) {\n        for (var i = 0; i < weightsNames.length; i++){\n            if (name == weightsNames[i]) {\n                return 'font-weight: ' + fontWeights[name];\n            }\n        }\n    }\n  };\n\n  function getVariable(tag, attrs) {\n     for (var i = 0; i < allLayers.length; i++) {\n        var layer = allLayers[i],\n            fullLayerName = String(layer.name()),\n            splitName = getAllTags(fullLayerName),\n            layerName = splitName == null ? fullLayerName : splitName[0];\n\n      if (splitName != null && layerName == 'nucleon') {\n        var tags = fullLayerName.split(\"#\").slice(1);\n        var nucleonVars = [];\n        var parentGroupName = layer.parentGroup().name();\n        var wayPath = '@import ' + '\"' + parentGroupName + '\";';\n\n        for (var y = 0; y < tags.length; y++) {\n          var tagName = String(tags[y]);\n          var key = tag.charAt(0);\n          var nucleonProp = nucleonPropNames[key];\n          var nucleonVar = nucleonProp + ': mdg($' + parentGroupName + ', ' + tagName.replace(/\\#/g, '') + ')';\n\n          if (ways.indexOf(wayPath) == -1 && tag == tagName){\n            ways.push(wayPath);\n          }\n\n          if (tag == tagName && key == 't' || tag == tagName && key == 'c') {\n              var res;\n\n              attrs.forEach(function(attr){\n                  var attrName = getPropName(attr);\n\n                  if (key == 't') {\n                      nucleonVars.push(attrName + ': mdg($' + parentGroupName + ', ' + tagName.replace(/\\#/g, '') + ', ' +  attrName + ')');\n                      res = nucleonVars;\n                  } else if (attrName == 'color' && key == 'c') {\n                      res = attrName + ': mdg($' + parentGroupName + ', ' + tagName.replace(/\\#/g, '') + ')';\n                  }\n              })\n\n              return res;\n\n          }\n          else if (tag == tagName) {\n              return nucleonVar;\n          }\n        }\n      }\n    }\n  };\n\n  function getShadows(layer){\n    var shadows = layer.style().enabledShadows();\n    var innerShadows = layer.style().enabledInnerShadows();\n    var cssShadows = '';\n    var cssInnerShadows = '';\n\n    shadows.forEach(function(s){\n        cssShadows += s.offsetX() + 'px ' + s.offsetY() + 'px ' + s.blurRadius() + 'px ' + s.spread() + 'px ' + rgbaCode(s.color()) + ', ';\n    })\n\n    innerShadows.forEach(function(s){\n        cssInnerShadows += 'inset ' + s.offsetX() + 'px ' + s.offsetY() + 'px ' + s.blurRadius() + 'px ' + s.spread() + 'px ' + rgbaCode(s.color()) + ', ';\n    })\n\n    if (cssShadows && !cssInnerShadows) {\n      return cssShadows.slice(0,  -2);\n    }\n    else if (cssInnerShadows && !cssShadows) {\n      return cssInnerShadows.slice(0,  -2);\n    }\n    else if (cssShadows && cssInnerShadows) {\n      return cssShadows.slice(0,  -2) + ', ' + cssInnerShadows.slice(0,  -2);\n    }\n  }\n\n  function getRadius(layer) {\n    var points = [];\n\n    layer.children().forEach(function(e){\n        if(e.class() == 'MSRectangleShape') {\n            points = e.points();\n        }\n    });\n\n    var radiusTopLeft = Math.round(points.objectAtIndex(0).cornerRadius()),\n        radiusTopRight = Math.round(points.objectAtIndex(1).cornerRadius()),\n        radiusBottomRight = Math.round(points.objectAtIndex(2).cornerRadius()),\n        radiusBottomLeft = Math.round(points.objectAtIndex(3).cornerRadius());\n\n    return  radiusTopLeft + 'px ' + radiusTopRight + 'px ' + radiusBottomRight + 'px ' + radiusBottomLeft + 'px';\n  }\n\n  function layerAttrsBuilder(layer) {\n    var fullLayerName = layer.name(),\n        splitName = getAllTags(fullLayerName),\n        layerName = splitName == null ? fullLayerName : splitName[0],\n        tagsNames = fullLayerName.split(\"#\").slice(1),\n        nucleonAttrsObj = {},\n        attrsObj = {},\n        rawAttrs = layer.CSSAttributes().slice(1, -1);\n        attrs = [];\n\n        rawAttrs.forEach(function(attr){\n            attrs.push(attr.replace(/;/g, ''));\n        })\n\n    if (!isText(layer) && !isSymbolInstance(layer)) {\n        var boxShadow = getShadows(layer) ? 'box-shadow: ' + getShadows(layer) : 'box-shadow: none';\n        var radius = 'border-radius: ' + getRadius(layer);\n\n        attrs.splice(attrs.length, 0,\n          'height: ' + layer.frame().height() + 'px',\n          'width: ' + layer.frame().width() + 'px',\n          radius,\n          boxShadow,\n        );\n    } else if (isText(layer)) {\n      var attrFontWeight;\n\n      attrs.forEach(function(attr) {\n        if (getPropName(attr) == 'font-family') {\n          attrFontWeight = fontWeight(attr);\n        }\n      })\n\n      attrs.splice(attrs.length, 0,\n        'line-height: ' + layer.lineHeight() + 'px',\n        attrFontWeight,\n      );\n    }\n\n    if (splitName[1] && tagsNames) {\n        tagsNames.forEach(function(tag){\n            var tagName = String(tag);\n            var key = tagName.charAt(0);\n            var nucleonPropName = nucleonPropNames[key];\n\n            attrs.forEach(function(attr, index){\n                    if (isText(layer) && key == 't') {\n                      layerName == 'nucleon' ? nucleonAttrsObj[tagName] = attrs : attrs = getVariable(tag, attrs);\n                    }\n                    else if (getPropName(attr) == nucleonPropName){\n                      layerName == 'nucleon' ? nucleonAttrsObj[tagName] = getnucleonPropVal(layer, nucleonPropName) : attrs[index] = getVariable(tag, attrs);\n                    }\n            })\n\n            if (layerName != 'nucleon') {\n              nucleonAttrsObj[layerName] = attrs;\n            }\n        })\n    } else {\n      nucleonAttrsObj[layerName] = attrs;\n    }\n\n    attrsObj[layerName] = attrs;\n\n    if (isText(layer) || layerName == 'nucleon') {\n      return nucleonAttrsObj;\n    }\n    else {\n      return attrsObj;\n    }\n  };\n\n  function buildData(collection, result) {\n    collection.forEach(function(layer){\n      builderData(layer, result);\n    })\n  }\n\n  function builderData(layer, result) {\n      var fullLayerName = layer.name(),\n          splitName = getAllTags(fullLayerName),\n          layerName = splitName == null ? fullLayerName : splitName[0];\n\n      if (isSymbolInstance(layer)) {\n          layer.symbolMaster().layers().forEach(function(symbolLayer){\n              if (isSymbolInstance(symbolLayer)) {\n                  alert(\"ERROR!\", 'Put embedded symbol \"' + symbolLayer.name() + '\" in a symbol-master group.');\n              }\n              else {\n                  var fullSymbolLayerName = symbolLayer.name();\n                  var symbolSplitName = getAllTags(fullSymbolLayerName);\n                  var symbolLayerName = symbolSplitName == null ? fullSymbolLayerName : symbolSplitName[0];\n                  var deepCollection = symbolLayer.layers();\n\n                  result[symbolLayerName] = {};\n\n                  buildData(deepCollection, result[symbolLayerName]);\n              }\n          })\n      }\n      else if (isGroup(layer)) {\n          var deepCollection = layer.layers();\n          // log(layerName);\n          result[layerName] = {};\n\n          buildData(deepCollection, result[layerName]);\n      }\n      else if (isText(layer) || isLayer(layer)) {\n          result = Object.assign(result, layerAttrsBuilder(layer));\n      }\n  }\n\n\t//loop through the selected layers and export the XML\n\tfor(var i = 0; i < selection.count(); i++){\n    var selectedLayer = selection[i],\n        collectionName = String(selectedLayer.name());\n\n    if (!isGroup(selectedLayer)) {\n      alert(\"ERROR!\", \"Please select a group.\");\n    } else {\n      var collection = selectedLayer.layers(),\n          result = {};\n\n      buildData(collection, result);\n      exportJSON(result, file_path, collectionName);\n    }\n\t}\n};\n"],"sourceRoot":""}