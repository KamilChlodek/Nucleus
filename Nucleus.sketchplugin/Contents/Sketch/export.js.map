{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/common.js","webpack://exports/./src/export.js"],"names":["isPage","layer","class","MSPage","isArtboard","MSArtboardGroup","isSymbolMaster","MSSymbolMaster","isSymbolInstance","MSSymbolInstance","isShape","MSShapeGroup","isSymbol","isGroup","MSLayerGroup","isLayer","isText","MSTextLayer","alert","title","message","app","NSApplication","sharedApplication","displayDialog_withTitle_","getFirstTag","str","match","getAllTags","getAllTagsWithoutName","getPropName","split","getPropVal","tagAndNames","fullLayerName","name","splitName","layerName","inTag","fullName","tags","rgbaCode","color","red","Math","round","green","blue","alpha","getShadow","style","shadows","enabledShadows","len","length","getInnerShadow","enabledInnerShadows","exportAction","context","ways","doc","document","selection","selectedLayer","firstObject","allLayers","i","pages","page","objectAtIndex","artboards","getAllLayers","isIcon","tagsNames","slice","key","forEach","tag","tagName","String","charAt","objects","obj","layers","push","exportJSON","a","file_path","filename","jsonName","jsonObj","format","jsonAsStr","JSON","stringify","substring","replace","formattedString","file","NSString","stringWithString","writeToFile_atomically_encoding_error_","NSUTF8StringEncoding","alertMessage","common","count","showMessage","fileTypes","NSArray","arrayWithObjects","panel","NSOpenPanel","openPanel","setCanChooseDirectories","setCanCreateDirectories","setAllowedFileTypes","clicked","runModal","NSFileHandlingPanelOKButton","isDirectory","firstURL","URLs","stringWithFormat_","stringWithString_","indexOf","fontWeights","thin","extralight","ultralight","light","book","normal","regular","roman","medium","semibold","demibold","bold","boldmt","psboldmt","extrabold","ultrabold","black","heavy","nucleonPropNames","getNucleonPropVal","nucleonPropName","nucleonPropValues","textColor","styleAttributes","MSAttributedStringTextTransformAttribute","frame","height","width","firstEnabledFill","getRadius","getShadows","getBase64","weightsNames","Object","keys","fontWeight","attr","toLowerCase","getVariable","attrs","nucleonVars","parentGroupName","parentGroup","wayPath","y","nucleonProp","nucleonVar","res","attrName","dediplicate","result","item","attrDelete","args","splice","ancestry","MSImmutableLayerAncestry","ancestryWithMSLayer_","exportRequest","MSExportRequest","exportRequestsFromLayerAncestry_","exporter","MSExporter","exporterForRequest_colorSpace_","NSColorSpace","sRGBColorSpace","data","base64Code","base64EncodedStringWithOptions","NSDataBase64EncodingEndLineWithLineFeed","base64","alloc","initWithData_encoding","innerShadows","cssShadows","cssInnerShadows","s","offsetX","offsetY","blurRadius","spread","points","children","e","radiusTopLeft","cornerRadius","radiusTopRight","radiusBottomRight","radiusBottomLeft","getAttrs","rawAttrs","CSSAttributes","layerAttrsBuilder","nucleonAttrsObj","attrsObj","values","boxShadow","radius","attrFontWeight","textTransform","cleanAttrs","index","buildData","collection","builderData","symbolMaster","symbolLayer","fullSymbolLayerName","symbolSplitName","symbolLayerName","deepCollection","assign","collectionName"],"mappings":"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","file":"export.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/export.js\");\n","export function isPage(layer) {\n\treturn layer.class() == MSPage;\n}\n\nexport function isArtboard(layer) {\n\treturn layer.class() == MSArtboardGroup;\n}\n\nexport function isSymbolMaster(layer) {\n\treturn layer.class() == MSSymbolMaster;\n}\n\nexport function isSymbolInstance(layer) {\n\treturn layer.class() == MSSymbolInstance;\n}\n\nexport function isShape(layer) {\n\treturn layer.class() == MSShapeGroup;\n}\n\nexport function isSymbol(layer) {\n\treturn layer.class() == MSSymbolInstance || layer.class() == MSSymbolMaster;\n}\n\nexport function isGroup(layer) {\n\treturn layer.class() == MSLayerGroup;\n}\n\nexport function isLayer(layer) {\n\treturn !isGroup(layer) && !isText(layer) && !isSymbolInstance(layer);\n}\n\n// MSTextLayer\nexport function isText(layer) {\n\treturn layer.class() == MSTextLayer;\n}\n\nexport function alert(title, message){\n\tvar app = NSApplication. sharedApplication();\n\tapp.displayDialog_withTitle_(message, title);\n}\n\nexport function getFirstTag(str){\n\treturn str.match(/[^#\\ ^\\.]+/g);\n}\n\nexport function getAllTags(str){\n\treturn str.match(/[^#\\ ^\\.]+/g);\n}\n\nexport function getAllTagsWithoutName(str){\n\t return str.match(/#([^#\\ ^\\.]+)/);\n}\n\nexport function getPropName(str){\n\tvar split = str.match(/(.+)\\:\\s*(.+)/);\n\treturn split[1];\n}\n\nexport function getPropVal(str){\n\tvar split = str.match(/(.+)\\:\\s*(.+)/);\n\treturn split[2];\n}\n\nexport function tagAndNames(layer){\n\t\tvar fullLayerName = layer.name(),\n\t\tsplitName = getAllTags(fullLayerName),\n\t\tlayerName = splitName == null ? fullLayerName : splitName[0],\n\t \tinTag = getAllTagsWithoutName(fullLayerName) ?  true : false;\n\n\t\treturn {fullName: fullLayerName, tags: inTag, name: layerName}\n}\n\n\nexport function rgbaCode(color) {\n  var red = Math.round(color.red() * 255);\n  var green = Math.round(color.green() * 255);\n  var blue = Math.round(color.blue() * 255);\n\n  return 'rgba(' + red + ',' + green + ',' + blue + ',' + color.alpha() + ')';\n}\n\nexport function getShadow(style) {\n\tvar shadows = style.enabledShadows();\n\tvar len = shadows.length;\n\n\tif (len == 0) {\n\t\treturn null;\n\t} else {\n\t\treturn shadows[len - 1];\n\t}\n}\n\nexport function getInnerShadow(style) {\n\tvar shadows = style.enabledInnerShadows();\n\tvar len = shadows.length;\n\n\tif (len == 0) {\n\t\treturn null;\n\t} else {\n\t\treturn shadows[len - 1];\n\t}\n}\n","import * as common from './common';\n\nexport function exportAction (context) {\n  var ways = [];\n  var doc = context.document;\n  var selection = context.selection;\n  var selectedLayer = selection.firstObject();\n  // var allLayers = getLayersForExport(doc.pages(), selectedLayer);\n  var allLayers = [];\n  // var sharedStyles = context.document.documentData().layerStyles().sharedStyles();\n  //\n  for (var i = 0; i < doc.pages().length; i++) {\n    var page = doc.pages().objectAtIndex(i);\n    var artboards = page.artboards();\n    getAllLayers(artboards);\n  }\n\n  function isIcon(layer){\n    var tagsNames = layer.name().split(\"#\").slice(1);\n    var key = '';\n\n    tagsNames.forEach((tag) => {\n      var tagName = String(tag);\n      tagName.charAt(0) == 'i' ? key = true : false;\n    })\n\n    return key;\n  }\n\n  function getAllLayers(objects){\n    objects.forEach(function(obj){\n      if (common.isArtboard(obj)) {\n        var layers = obj.layers();\n\n        getAllLayers(layers);\n        //need alert Please create the artboard\n      }\n      else if (common.isSymbolMaster(obj)) {\n        var layers = obj.layers();\n\n        allLayers.push(obj);\n        getAllLayers(layers);\n      }\n      else if (common.isGroup(obj)) {\n        var layers = obj.layers();\n        isIcon(obj) ? allLayers.push(obj) : getAllLayers(layers);\n      }\n      else {\n        allLayers.push(obj);\n      }\n    })\n  }\n\n  function exportJSON(a, file_path, filename){\n    var jsonName = '$' + String(filename);\n  \t// Create the JSON object from the layer array\n    var jsonObj = {};\n    jsonObj[jsonName] = a;\n\n    function format(obj){\n      var jsonAsStr = JSON.stringify(obj, null, 2);\n      jsonAsStr = jsonAsStr.substring(1, jsonAsStr.length - 1);\n      jsonAsStr = jsonAsStr.replace(/\"/g, '')\n                          .replace(/[\\[\\{]/g, '(')\n                          .replace(/[\\]\\}]/g, ')')\n                          .replace(/\\\\/g, '\\'');\n\n      return jsonAsStr;\n    }\n\n    var formattedString = format(ways).replace(/,/g, '') + format(jsonObj);\n    var file = NSString.stringWithString(formattedString + ';');\n    // Save the file\n    file.writeToFile_atomically_encoding_error_( file_path + filename + \".scss\"  ,true  ,NSUTF8StringEncoding  ,null);\n\n    var alertMessage = jsonName + \" saved to: \" + file_path;\n    common.alert(\"SCSS MAP Exported!\", alertMessage);\n  };\n\n  //make sure something is selected\n  if(selection.count() == 0){\n    \tdoc.showMessage(\"Please select a layer.\");\n  }\n  else {\n\n    //allow xml to be written to the folder\n    var fileTypes = NSArray.arrayWithObjects(\"json\", null);\n\n    //create select folder window\n    var panel = NSOpenPanel.openPanel();\n    panel.setCanChooseDirectories(true);\n    panel.setCanCreateDirectories(true);\n    panel.setAllowedFileTypes(fileTypes);\n\n    var clicked = panel.runModal();\n    //check if Ok has been clicked\n  \tif (clicked == NSFileHandlingPanelOKButton) {\n\n  \t\tvar isDirectory = true;\n      //get the folder path\n  \t\tvar firstURL = panel.URLs().objectAtIndex(0);\n      //format it to a string\n  \t\tvar file_path = NSString.stringWithFormat_( NSString.stringWithString_( \"%@\"), firstURL);\n\n      //remove the file:// path from string\n      if (0 === file_path.indexOf(\"file://\")) {\n        file_path = file_path.substring(7);\n      }\n  \t}\n  }\n\n  //google fonts weigts\n  var fontWeights = {\n     thin: 100,\n     extralight: 200,\n     ultralight: 200,\n     light: 300,\n     book: 400,\n     normal: 400,\n     regular: 400,\n     roman: 400,\n     medium: 500,\n     semibold: 600,\n     demibold: 600,\n     bold: 700,\n     boldmt: 700,\n     psboldmt: 700,\n     extrabold: 800,\n     ultrabold: 800,\n     black: 900,\n     heavy: 900\n   };\n\n   var nucleonPropNames = {\n     'h': 'height',\n     'w': 'width',\n     'o': 'width',\n     'b': 'background',\n     'c': 'color',\n     'r': 'border-radius',\n     's': 'box-shadow',\n   };\n\n   function getNucleonPropVal(layer, nucleonPropName, key) {\n      var nucleonPropValues = {};\n\n      if (common.isText(layer)) {\n        nucleonPropValues = {\n          'color': common.rgbaCode(layer.textColor()),\n          'text-transform': layer.styleAttributes().MSAttributedStringTextTransformAttribute == 1 ? 'uppercase' : 'none',\n        }\n      } else if (key != 'i') {\n        nucleonPropValues = {\n           'height': layer.frame().height() + 'px',\n           'width': layer.frame().width() + 'px',\n           'background': common.rgbaCode(layer.style().firstEnabledFill().color()),\n           'border-radius': getRadius(layer),\n           'box-shadow': getShadows(layer),\n        }\n      } else {\n        nucleonPropValues = {\n          'height': layer.frame().height() + 'px',\n          'width': layer.frame().width() + 'px',\n          'background-image': getBase64(layer),\n        }\n      }\n\n      return nucleonPropValues[nucleonPropName];\n   }\n\n  var  weightsNames = Object.keys(fontWeights);\n\n  function getFirstTag(str){\n    return str.match(/[^#\\ ^\\.]+/g);\n  }\n\n  function fontWeight(attr){\n    var splitName = attr.match(/(.+)\\-\\s*(.+)/);\n    var name = splitName[2].toLowerCase();\n\n    if (splitName != null) {\n        for (var i = 0; i < weightsNames.length; i++){\n            if (name == weightsNames[i]) {\n                return 'font-weight: ' + fontWeights[name];\n            }\n        }\n    }\n  };\n\n  function getVariable(tag, attrs){\n     for (var i = 0; i < allLayers.length; i++) {\n        var layer = allLayers[i],\n            fullLayerName = String(layer.name()),\n            splitName = common.getAllTags(fullLayerName),\n            layerName = splitName == null ? fullLayerName : splitName[0];\n\n      if (splitName != null && layerName == 'nucleon') {\n        var tags = fullLayerName.split(\"#\").slice(1);\n        var nucleonVars = [];\n        var parentGroupName = layer.parentGroup().name();\n        var wayPath = '@import ' + '\"' + parentGroupName + '\";';\n\n        for (var y = 0; y < tags.length; y++) {\n          var tagName = String(tags[y]);\n          var key = tag.charAt(0);\n          var nucleonProp = nucleonPropNames[key];\n          var nucleonVar = nucleonProp + ': mdg($' + parentGroupName + ', ' + tagName.replace(/\\#/g, '') + ')';\n\n          if (ways.indexOf(wayPath) == -1 && tag == tagName){\n            ways.push(wayPath);\n          }\n\n          if (tag == tagName && key == 't' || tag == tagName && key == 'c') {\n              var res;\n\n              attrs.forEach((attr) => {\n                  var attrName = common.getPropName(attr);\n\n                  if (key == 't') {\n                      if (attrName == 'extend') {\n                        nucleonVars.push(attrName + ': ' + \"'\" + tagName + \"'\");\n                      } else {\n                        nucleonVars.push(attrName + ': mdg($' + parentGroupName + ', ' + tagName.replace(/\\#/g, '') + ', ' +  attrName + ')');\n                      }\n                      res = nucleonVars;\n                  } else if (attrName == 'color' && key == 'c') {\n                      res = attrName + ': mdg($' + parentGroupName + ', ' + tagName.replace(/\\#/g, '') + ')';\n                  }\n              })\n\n              return res;\n\n          } else if (tag == tagName && key == 'i') {\n            var res;\n\n            attrs.forEach((attr) => {\n              var attrName = attr.match(/^([^:]+):/);\n\n              if (attrName[1] == 'extend') {\n                nucleonVars.push(attrName[1] + ': ' + \"'\" + tagName + \"'\");\n              } else {\n                nucleonVars.push(attrName[1] + ': mdg($' + parentGroupName + ', ' + tagName.replace(/\\#/g, '') + ', ' +  attrName[1] + ')');\n              }\n            })\n\n            return nucleonVars;\n          }\n          else if (tag == tagName) {\n              return nucleonVar;\n          }\n        }\n      }\n    }\n  };\n\n  // function clearSVG(svg){\n  //   var substr = [\n  //     svg.match(/(.+)\\<!\\s*(.+)/),\n  //     svg.match(/(.+)\\<title\\s*(.+)/),\n  //     svg.match(/(.+)\\<desc\\s*(.+)/),\n  //     svg.match(/(.+)\\<defs\\s*(.+)/)\n  //   ];\n  //\n  //   substr.forEach((sub) => {\n  //     svg.replace(sub, '');\n  //   })\n  // }\n\n  function dediplicate(a){\n    var result = [];\n    a.forEach(function(item) {\n       if(result.indexOf(item) < 0) {\n           result.push(item);\n       }\n    });\n\n    return result;\n  }\n\n  function attrDelete(attrs, args) {\n    for(var i = 0; i < attrs.length; i++){\n      args.forEach((a) => {\n        if (typeof attrs[i] == 'string' && common.getPropName(attrs[i]) == a && common.getPropName(attrs[i]) != 'background') {\n          attrs.splice(i, 1);\n        }\n      })\n    }\n  }\n\n  function getBase64(layer){\n    var ancestry = MSImmutableLayerAncestry.ancestryWithMSLayer_(layer);\n    var exportRequest = MSExportRequest.exportRequestsFromLayerAncestry_(ancestry).firstObject();\n    exportRequest.format = 'svg';\n    var exporter = MSExporter.exporterForRequest_colorSpace_(exportRequest, NSColorSpace.sRGBColorSpace());\n    var data = exporter.data();\n    var base64Code = data.base64EncodedStringWithOptions(NSDataBase64EncodingEndLineWithLineFeed);\n    var base64 = NSString.alloc().initWithData_encoding(data, NSUTF8StringEncoding);\n\n    return \"url('data:image/svg+xml;base64,\" + base64Code + \"')\";\n  }\n\n  function getShadows(layer){\n    var shadows = layer.style().enabledShadows();\n    var innerShadows = layer.style().enabledInnerShadows();\n    var cssShadows = '';\n    var cssInnerShadows = '';\n\n    shadows.forEach(function(s){\n        cssShadows += s.offsetX() + 'px ' + s.offsetY() + 'px ' + s.blurRadius() + 'px ' + s.spread() + 'px ' + common.rgbaCode(s.color()) + ', ';\n    })\n\n    innerShadows.forEach(function(s){\n        cssInnerShadows += 'inset ' + s.offsetX() + 'px ' + s.offsetY() + 'px ' + s.blurRadius() + 'px ' + s.spread() + 'px ' + common.rgbaCode(s.color()) + ', ';\n    })\n\n    if (cssShadows && !cssInnerShadows) {\n      return cssShadows.slice(0,  -2);\n    }\n    else if (cssInnerShadows && !cssShadows) {\n      return cssInnerShadows.slice(0,  -2);\n    }\n    else if (cssShadows && cssInnerShadows) {\n      return cssShadows.slice(0,  -2) + ', ' + cssInnerShadows.slice(0,  -2);\n    }\n  }\n\n  function getRadius(layer) {\n    var points = [];\n\n    layer.children().forEach(function(e){\n        if(e.class() == 'MSRectangleShape') {\n            points = e.points();\n        }\n    });\n\n    var radiusTopLeft = Math.round(points.objectAtIndex(0).cornerRadius()),\n        radiusTopRight = Math.round(points.objectAtIndex(1).cornerRadius()),\n        radiusBottomRight = Math.round(points.objectAtIndex(2).cornerRadius()),\n        radiusBottomLeft = Math.round(points.objectAtIndex(3).cornerRadius());\n\n    return  radiusTopLeft + 'px ' + radiusTopRight + 'px ' + radiusBottomRight + 'px ' + radiusBottomLeft + 'px';\n  }\n\n  function getAttrs(layer){\n    var attrs = [];\n    var rawAttrs = layer.CSSAttributes();\n\n    rawAttrs.forEach(function(attr) {\n        if (!attr.match(/[\\/*^\\.]/g)) {\n          attrs.push(attr.replace(/;/g, ''));\n        }\n    });\n\n    return attrs;\n  };\n\n  function layerAttrsBuilder(layer) {\n    var fullLayerName = layer.name(),\n        splitName = common.getAllTags(fullLayerName),\n        layerName = splitName == null ? fullLayerName : splitName[0],\n        tagsNames = fullLayerName.split(\"#\").slice(1),\n        nucleonAttrsObj = {},\n        attrsObj = {},\n        attrs = getAttrs(layer);\n\n    attrDelete(attrs, Object.values(nucleonPropNames));\n\n    if (common.isLayer(layer) && !isIcon(layer)) {\n      var boxShadow = getShadows(layer) ? 'box-shadow: ' + getShadows(layer) : 'box-shadow: none';\n      var radius = 'border-radius: ' + getRadius(layer);\n\n\n      attrs.splice(attrs.length, 0,\n        'height: ' + layer.frame().height() + 'px',\n        'width: ' + layer.frame().width() + 'px',\n        boxShadow,\n        radius,\n      );\n\n    } else if (isIcon(layer)) {\n      attrs.splice(attrs.length, 0,\n        'extend: ' + 'name',\n        'height: ' + layer.frame().height() + 'px',\n        'width: ' + layer.frame().width() + 'px',\n        'background-image: ' + getBase64(layer),\n      );\n    }\n\n    else if (common.isText(layer)) {\n      var attrFontWeight;\n      var textTransform = layer.styleAttributes().MSAttributedStringTextTransformAttribute == 1 ? 'uppercase' : 'none';\n\n      attrs.forEach(function(attr) {\n        if (common.getPropName(attr) == 'font-family') {\n          attrFontWeight = fontWeight(attr);\n        }\n      })\n\n      attrs.splice(attrs.length, 0,\n        'extend: ' + 'name',\n        // 'line-height: ' + layer.lineHeight() + 'px',// in base sketch functional\n        'text-transform: ' + textTransform,\n        'color: ' +  common.rgbaCode(layer.textColor()),\n        attrFontWeight,\n      );\n    }\n\n    var cleanAttrs = dediplicate(attrs);\n\n    if (splitName[1] && tagsNames) {\n        tagsNames.forEach(function(tag){\n            var tagName = String(tag);\n            var key = tagName.charAt(0);\n            var nucleonPropName = nucleonPropNames[key];\n\n            cleanAttrs.forEach(function(attr, index){\n                if ((common.isText(layer) && key == 't') || key == 'i') {\n                  layerName == 'nucleon' ? nucleonAttrsObj[tagName] = cleanAttrs : cleanAttrs = getVariable(tag, cleanAttrs);\n                }\n                else if (common.getPropName(attr) == nucleonPropName){\n                  layerName == 'nucleon' ? nucleonAttrsObj[tagName] = getNucleonPropVal(layer, nucleonPropName, key) : cleanAttrs[index] = getVariable(tag, cleanAttrs);\n                }\n            })\n\n            if (layerName != 'nucleon') {\n              nucleonAttrsObj[layerName] = cleanAttrs;\n            }\n        })\n    } else {\n      nucleonAttrsObj[layerName] = cleanAttrs;\n    }\n\n    attrsObj[layerName] = cleanAttrs;\n\n    if (common.isText(layer) || layerName == 'nucleon') {\n      return nucleonAttrsObj;\n    }\n    else {\n      return attrsObj;\n    }\n  };\n\n  function buildData(collection, result) {\n    collection.forEach(function(layer){\n      builderData(layer, result);\n    })\n  }\n\n  function builderData(layer, result) {\n      var fullLayerName = layer.name(),\n          splitName = common.getAllTags(fullLayerName),\n          layerName = splitName == null ? fullLayerName : splitName[0];\n\n      if (common.isSymbolInstance(layer)) {\n          layer.symbolMaster().layers().forEach(function(symbolLayer){\n              if (common.isSymbolInstance(symbolLayer)) {\n                  common.alert(\"ERROR!\", 'Put embedded symbol \"' + symbolLayer.name() + '\" in a symbol-master group.');\n              }\n              else {\n                  var fullSymbolLayerName = symbolLayer.name();\n                  var symbolSplitName = common.getAllTags(fullSymbolLayerName);\n                  var symbolLayerName = symbolSplitName == null ? fullSymbolLayerName : symbolSplitName[0];\n                  var deepCollection = symbolLayer.layers();\n\n                  result[symbolLayerName] = {};\n\n                  buildData(deepCollection, result[symbolLayerName]);\n              }\n          })\n      }\n      else if (common.isGroup(layer) && !isIcon(layer)) {\n          var deepCollection = layer.layers();\n          result[layerName] = {};\n\n          buildData(deepCollection, result[layerName]);\n      }\n      else if (common.isText(layer) || common.isLayer(layer) || isIcon(layer)) {\n          result = Object.assign(result, layerAttrsBuilder(layer));\n      }\n  }\n\n\t// loop through the selected layers and export the XML\n\tfor(var i = 0; i < selection.count(); i++){\n    var selectedLayer = selection[i],\n        collectionName = String(selectedLayer.name());\n\n    if (!common.isGroup(selectedLayer)) {\n      common.alert(\"ERROR!\", \"Please select a group.\");\n    } else {\n      var collection = selectedLayer.layers(),\n          result = {};\n\n      buildData(collection, result);\n      exportJSON(result, file_path, collectionName);\n    }\n\t}\n};\n"],"sourceRoot":""}